<?xml version="1.0" encoding="UTF-8"?><record_update sys_domain="global" table="sys_cs_topic">
    <sys_cs_topic action="INSERT_OR_UPDATE">
        <active>true</active>
        <applicability>true</applicability>
        <auto_resolution_enabled>false</auto_resolution_enabled>
        <cb_topic_id display_value="Weather">ddd30cdedbd7e8101d775385ca9619a7</cb_topic_id>
        <channels/>
        <definition>{"id":"ddd30cdedbd7e8101d775385ca9619a7","name":"Weather","system_topic":false,"vendor_id":"c2f0b8f187033200246ddd4c97cb0bb9","description":"Weather","applicability":"true","categories":[],"key_phrases":["Weather"],"variables":[{"name":"icon","type":"java.lang.Object","init_value":"\"icon not found\""},{"name":"description","type":"java.lang.Object","init_value":"\"description not found\""},{"name":"currentTemp","type":"java.lang.Object","init_value":"\"Current temp not found\""},{"name":"cityName","type":"java.lang.Object"},{"name":"sys_id","type":"java.lang.Object","init_value":"\"sys_id not found\""},{"name":"error","type":"java.lang.Object","init_value":"\"error\""},{"name":"cityNameHeading","type":"java.lang.Object","init_value":"\"cityNameHeading not found\""},{"name":"City_State","type":"java.lang.Object","init_value":"\"City_State not found\""},{"name":"CityLIstResults","type":"java.lang.Object","init_value":"\"CityLIstResults not found\""},{"name":"ListofCities","type":"java.lang.Object","init_value":"\"ListofCities not found\""},{"name":"DoesCityExist","type":"java.lang.Object","init_value":"\"DoesCityExist not found\""},{"name":"EmptyString","type":"java.lang.Object","init_value":"\"EmptyString not found\""},{"name":"noData_34193f0376014e119a4a3038827d82c0","type":"java.lang.Object"},{"name":"noData_2370dce48b354c938d33a8eb9bb1b949","type":"java.lang.Object"},{"name":"__segment_trigger_e4fac172df4343808b7d3f3ed6bde7a7_done","type":"java.lang.Object","init_value":"false"},{"name":"previous_graph_node","type":"java.lang.Object"}],"fields":[{"type":"Reference","table_name":"sys_user","name":"user","unique":false,"key_phrases":[],"mask_type":"NONE","static_enum_list":[]},{"type":"String","name":"city4characters","unique":false,"key_phrases":[],"mask_type":"NONE","static_enum_list":[],"encrypt_if_secure":true},{"type":"ID","name":"choice_of_city","unique":false,"key_phrases":[],"mask_type":"NONE","static_enum_list":[],"dynamic_enum_list":{"name":"choice_of_city","props":[{"name":"value","isItemValue":true,"isPicture":false},{"name":"label","isItemValue":false,"isPicture":false}]},"binding":{"write_to":[],"enum_list":{"expression":"(function execute() {var vaRuntimeUtil = new global.VaTopicRuntimeUtil();var funcObj = {\"customApplies\": function() {return (function() {return true})();},\"applies\": function() {return this.customApplies() &amp;&amp; this.buildOptions().length &gt; 0;},\"buildOptions\": function() {if (true || this.customApplies()) {return (function execute() {\n   try { \n  var r = new sn_ws.RESTMessageV2('x_544290_weather.GeoBytesCity', 'Default GET');\n r.setStringParameterNoEscape('city',vaInputs.city4characters);\n\n var response = r.execute();\n var responseBody = response.getBody();\n var httpStatus = response.getStatusCode();\n\n var str = responseBody;\nvar res = str.replace(\"[\\\"\", \"\");\n\nvar res2 = res.replace(\"\\\"]\", \"\");\n\nvar nameArr = res2.split('\",\"');\n\nvar options = [];\n\nfor (i = 0; i &lt; nameArr.length; ++i) {\n\n  var CityItem = nameArr[i];\n\n  var CityItem3 = CityItem.replace(\"\\, \",\"\\,\");\n\n  vaVars.CityLIstResults = CityItem3;\n\n  options.push({ 'value': CityItem3, 'label': gs.getMessage(CityItem3), 'render_style': 'data' });\n \n}\n \n  options.push({ 'value': \"exit\", 'label': \"Exit\", 'render_style': 'data' });\n   \n}\n\ncatch(ex) {\n var message = ex.message;\n}\n\n   return options;\n\n}\n\n)()\n;}return [];}};function isValid(option) {return !gs.nil(option) &amp;&amp; !gs.nil(option.value) &amp;&amp; !gs.nil(option.label);}function fixInvalid(invalidOption) {var fixedOption = {'value': 'no_data', 'label': 'no_data'};if (!gs.nil(invalidOption)) {fixedOption.value = !gs.nil(invalidOption.value) ? invalidOption.value : fixedOption.value;fixedOption.label = !gs.nil(invalidOption.label) ? invalidOption.label : fixedOption.label;}return fixedOption;}function buildNoOptionsArray() {return [{'value': 'no_data', 'label': 'no_data'},{'value': 'no_data', 'label': 'no_data'}];} function normalizeKeys(obj){Object.keys(obj).forEach(function (key) {var k = key.toLowerCase();if (k !== key) {obj[k] = obj[key];delete obj[key];}});return (obj);}var choiceOptions = [];choiceOptions = vaRuntimeUtil.executeFunction(funcObj, 'buildOptions');var noOptions = gs.nil(choiceOptions) || choiceOptions.length==0;if (noOptions) {choiceOptions = buildNoOptionsArray();}else {var invalidCount = 0;var normalizedChoiceOptions = [];for (var i = 0; i &lt; choiceOptions.length; i++) {normalizedChoiceOptions.push(normalizeKeys(choiceOptions[i]));}choiceOptions = normalizedChoiceOptions;for (var i = 0; i &lt; choiceOptions.length; i++) {if (gs.nil(choiceOptions[i].label)) {choiceOptions[i].label = choiceOptions[i].value;}}for (var i = 0; i &lt; choiceOptions.length; i++) {if (!isValid(choiceOptions[i])) {invalidCount++;choiceOptions[i] = fixInvalid(choiceOptions[i]);}}noOptions = invalidCount === choiceOptions.length;if (noOptions) {choiceOptions = buildNoOptionsArray();}vaVars.noData_34193f0376014e119a4a3038827d82c0 = noOptions; return choiceOptions;}})();"}}},{"type":"Reference","table_name":"x_544290_weather_weather_virtualagent","name":"choose_loc_from_history","unique":false,"key_phrases":[],"mask_type":"NONE","static_enum_list":[],"dynamic_enum_list":{"name":"choose_loc_from_history","props":[{"name":"value","isItemValue":true,"isPicture":false},{"name":"label","isItemValue":false,"isPicture":false}]},"binding":{"write_to":[],"enum_list":{"expression":"(function execute(table) {function isValid(option) {return !gs.nil(option) &amp;&amp; !gs.nil(option.value) &amp;&amp; !gs.nil(option.label);}function fixInvalid(invalidOption) {var fixedOption = {'value': 'no_data', 'label': 'no_data'};if (!gs.nil(invalidOption)) {fixedOption.value = !gs.nil(invalidOption.value) ? invalidOption.value : fixedOption.value;fixedOption.label = !gs.nil(invalidOption.label) ? invalidOption.label : fixedOption.label;}return fixedOption;}function buildNoOptionsArray() {return [{'value': 'no_data', 'label': 'no_data'},{'value': 'no_data', 'label': 'no_data'}];} function normalizeKeys(obj){Object.keys(obj).forEach(function (key) {var k = key.toLowerCase();if (k !== key) {obj[k] = obj[key];delete obj[key];}});return (obj);}var choiceOptions = [];var customApplies = true;if (!customApplies) {choiceOptions = buildNoOptionsArray();vaVars.noData_2370dce48b354c938d33a8eb9bb1b949 = true; return choiceOptions;}else {choiceOptions = (function execute(table) {\n\n      var options = [];\n      var gr = new GlideRecordSecure('x_544290_weather_weather_virtualagent');        \n\n      var userName = gs.getUserName() \n\n      vaVars.error = userName;\n\n       gr.addQuery('sys_updated_by',userName);\n       gr.orderByDesc('sys_updated_on');\n       gr.setLimit(4);\n       gr.query();\n        while(gr.next()) {\n          \n            options.push({ 'value': gr.getValue('location_choice'), 'label': gr.getValue('location_choice') });\n              \n        }\n        options.push({ 'value': \"chooseAnotherCity\", 'label': \"Choose Another City\" });\n         options.push({ 'value': \"exit\", 'label': \"Exit\" });\n         \n       \n        return options; \n\n   \n})(table)\n;var noOptions = gs.nil(choiceOptions) || choiceOptions.length==0;if (noOptions) {choiceOptions = buildNoOptionsArray();}else {var invalidCount = 0;var normalizedChoiceOptions = [];for (var i = 0; i &lt; choiceOptions.length; i++) {normalizedChoiceOptions.push(normalizeKeys(choiceOptions[i]));}choiceOptions = normalizedChoiceOptions;for (var i = 0; i &lt; choiceOptions.length; i++) {if (gs.nil(choiceOptions[i].label)) {choiceOptions[i].label = choiceOptions[i].value;}}for (var i = 0; i &lt; choiceOptions.length; i++) {if (!isValid(choiceOptions[i])) {invalidCount++;choiceOptions[i] = fixInvalid(choiceOptions[i]);}}noOptions = invalidCount === choiceOptions.length;}if (noOptions) {choiceOptions = buildNoOptionsArray();}vaVars.noData_2370dce48b354c938d33a8eb9bb1b949 = noOptions; return choiceOptions;}})('x_544290_weather_weather_virtualagent');"}}},{"type":"Boolean","name":"RootDecisionBranch_5228ce36421b6c106c96cf458a91a206","unique":false,"default_value":"true","key_phrases":[],"mask_type":"NONE","static_enum_list":[]},{"type":"String","name":"__silent_TerminateGoal_637ba7d5571b47ddb9ce89adc504b8c7","unique":false,"key_phrases":[],"mask_type":"NONE","static_enum_list":[],"encrypt_if_secure":true},{"type":"String","name":"__silent_HtmlOutputPrompt_42e0fe7aed6242008937b77379fda671","unique":false,"key_phrases":[],"mask_type":"NONE","static_enum_list":[],"encrypt_if_secure":true},{"type":"String","name":"__silent_OutputPrompt_f56ae04393bf4bbb8c887911b1ee0227","unique":false,"key_phrases":[],"mask_type":"NONE","static_enum_list":[],"encrypt_if_secure":true},{"type":"String","name":"__silent_Branch_RootDecisionBranch_1228ce36991b6c1090800f31da97ae06","unique":false,"key_phrases":[],"mask_type":"NONE","static_enum_list":[],"encrypt_if_secure":true},{"type":"String","name":"__silent_StartGoal_9fee03dec4044cd5acda5ba15f5d5b7d","unique":false,"key_phrases":[],"mask_type":"NONE","static_enum_list":[],"encrypt_if_secure":true},{"type":"String","name":"__silent_Decision_RootDecision_de28ce36d41b6c10fe081af13bee1305","unique":false,"key_phrases":[],"mask_type":"NONE","static_enum_list":[],"encrypt_if_secure":true},{"type":"String","name":"__silent_Decision_d1eeb6d361294635a20a39ca6bc698a2","unique":false,"key_phrases":[],"mask_type":"NONE","static_enum_list":[],"encrypt_if_secure":true},{"type":"String","name":"__silent_Branch_2ba53dc293f74d288eeaa55bf9d70987","unique":false,"key_phrases":[],"mask_type":"NONE","static_enum_list":[],"encrypt_if_secure":true},{"type":"String","name":"__silent_Branch_f3de844bd0714f7ea5ac0dfb6e58d0ec","unique":false,"key_phrases":[],"mask_type":"NONE","static_enum_list":[],"encrypt_if_secure":true},{"type":"String","name":"__silent_Branch_a0dbe84971ca4e2e8d11d4f83fe50094","unique":false,"key_phrases":[],"mask_type":"NONE","static_enum_list":[],"encrypt_if_secure":true},{"type":"String","name":"__silent_ScriptedAction_0e4ee5aaf36147b3b628557d72a775b4","unique":false,"key_phrases":[],"mask_type":"NONE","static_enum_list":[],"encrypt_if_secure":true},{"type":"String","name":"__silent_OutputPrompt_ee065874781c4882bc42174cb3fd66db","unique":false,"key_phrases":[],"mask_type":"NONE","static_enum_list":[],"encrypt_if_secure":true},{"type":"String","name":"__silent_Branch_bc609e4a03cb4318b3937fdbbb3b1e09","unique":false,"key_phrases":[],"mask_type":"NONE","static_enum_list":[],"encrypt_if_secure":true},{"type":"String","name":"__silent_Branch_c6dd904435284e2d87389f4a23aa33b8","unique":false,"key_phrases":[],"mask_type":"NONE","static_enum_list":[],"encrypt_if_secure":true},{"type":"String","name":"__silent_OutputPrompt_2d2f1c05b8e24953af9c45b3d2ed6430","unique":false,"key_phrases":[],"mask_type":"NONE","static_enum_list":[],"encrypt_if_secure":true},{"type":"String","name":"__silent_ScriptedAction_c5e32099ad06445bae8d01f5c7592d71","unique":false,"key_phrases":[],"mask_type":"NONE","static_enum_list":[],"encrypt_if_secure":true},{"type":"String","name":"__silent_ScriptedAction_8017d26c385e45a89c860a635460663c","unique":false,"key_phrases":[],"mask_type":"NONE","static_enum_list":[],"encrypt_if_secure":true},{"type":"String","name":"__silent_ScriptedAction_eb0d305196784ee9887b5a3bdf8f2dd8","unique":false,"key_phrases":[],"mask_type":"NONE","static_enum_list":[],"encrypt_if_secure":true},{"type":"String","name":"__silent_Branch_98a292fc46f64f93ac55e19f6e4fc478","unique":false,"key_phrases":[],"mask_type":"NONE","static_enum_list":[],"encrypt_if_secure":true},{"type":"String","name":"__silent_ScriptedAction_1e5ccd726d7149fb99e2deb7c81d5bec","unique":false,"key_phrases":[],"mask_type":"NONE","static_enum_list":[],"encrypt_if_secure":true},{"type":"String","name":"__silent_ScriptedAction_d566b824d67c4954aba683bbd8e697ac","unique":false,"key_phrases":[],"mask_type":"NONE","static_enum_list":[],"encrypt_if_secure":true},{"type":"String","name":"__silent_Decision_9437a7eb2ace41cea8707ec29f3b37e0","unique":false,"key_phrases":[],"mask_type":"NONE","static_enum_list":[],"encrypt_if_secure":true},{"type":"String","name":"__silent_Branch_6868bbf1712443258146a27bce2b1307","unique":false,"key_phrases":[],"mask_type":"NONE","static_enum_list":[],"encrypt_if_secure":true},{"type":"String","name":"__silent_Decision_6cbdd0cf42d540bbacee9377707552a5","unique":false,"key_phrases":[],"mask_type":"NONE","static_enum_list":[],"encrypt_if_secure":true}],"actions":[],"tasks":[{"type":"Consumer to system","show_as_button":true,"name":"primary","description":"primary","applicability":"vaVars.__segment_trigger_e4fac172df4343808b7d3f3ed6bde7a7_done==false &amp;&amp; true","mode":"Qmode","key_phrases":[],"greeting_msg":"vaInputs.initialize(\"user\");vaInputs.initialize(\"RootDecisionBranch_5228ce36421b6c106c96cf458a91a206\");vaInputs.initialize(\"__silent_Decision_d1eeb6d361294635a20a39ca6bc698a2\");vaInputs.initialize(\"city4characters\");vaInputs.initialize(\"__silent_Decision_RootDecision_de28ce36d41b6c10fe081af13bee1305\");vaInputs.initialize(\"__silent_Branch_RootDecisionBranch_1228ce36991b6c1090800f31da97ae06\");vaInputs.initialize(\"__silent_ScriptedAction_0e4ee5aaf36147b3b628557d72a775b4\");vaInputs.initialize(\"__silent_ScriptedAction_1e5ccd726d7149fb99e2deb7c81d5bec\");vaInputs.initialize(\"choice_of_city\");vaInputs.initialize(\"__silent_Decision_9437a7eb2ace41cea8707ec29f3b37e0\");vaInputs.initialize(\"__silent_OutputPrompt_f56ae04393bf4bbb8c887911b1ee0227\");vaInputs.initialize(\"__silent_TerminateGoal_637ba7d5571b47ddb9ce89adc504b8c7\");vaInputs.initialize(\"__silent_ScriptedAction_eb0d305196784ee9887b5a3bdf8f2dd8\");vaInputs.initialize(\"__silent_OutputPrompt_ee065874781c4882bc42174cb3fd66db\");vaInputs.initialize(\"__silent_Branch_98a292fc46f64f93ac55e19f6e4fc478\");vaInputs.initialize(\"__silent_Decision_6cbdd0cf42d540bbacee9377707552a5\");vaInputs.initialize(\"__silent_Branch_f3de844bd0714f7ea5ac0dfb6e58d0ec\");vaInputs.initialize(\"__silent_StartGoal_9fee03dec4044cd5acda5ba15f5d5b7d\");vaInputs.initialize(\"__silent_ScriptedAction_8017d26c385e45a89c860a635460663c\");vaInputs.initialize(\"__silent_Branch_2ba53dc293f74d288eeaa55bf9d70987\");vaInputs.initialize(\"__silent_Branch_a0dbe84971ca4e2e8d11d4f83fe50094\");vaInputs.initialize(\"__silent_Branch_bc609e4a03cb4318b3937fdbbb3b1e09\");vaInputs.initialize(\"__silent_Branch_c6dd904435284e2d87389f4a23aa33b8\");vaInputs.initialize(\"__silent_Branch_6868bbf1712443258146a27bce2b1307\");vaInputs.initialize(\"choose_loc_from_history\");vaInputs.initialize(\"__silent_ScriptedAction_d566b824d67c4954aba683bbd8e697ac\");vaInputs.initialize(\"__silent_HtmlOutputPrompt_42e0fe7aed6242008937b77379fda671\");vaInputs.initialize(\"__silent_ScriptedAction_c5e32099ad06445bae8d01f5c7592d71\");vaInputs.initialize(\"__silent_OutputPrompt_2d2f1c05b8e24953af9c45b3d2ed6430\");null;","fields":[{"name":"__silent_Decision_RootDecision_de28ce36d41b6c10fe081af13bee1305","direction":"Input","required":true,"prompt_msg":"vaVars.previous_graph_node=\"RootDecision_for_goal_primary___RootDecision_de28ce36d41b6c10fe081af13bee1305\";vaInputs.__silent_Decision_RootDecision_de28ce36d41b6c10fe081af13bee1305=true;null;","confirm_msg_on_default_value":{"msg":"","val_for_confirm":true},"nlu_text_input":false,"nlu_confirmation_prompt":false,"acknowledge_msg":"vaVars.previous_graph_node=\"RootDecision_for_goal_primary___RootDecision_de28ce36d41b6c10fe081af13bee1305\";vaInputs.RootDecisionBranch_5228ce36421b6c106c96cf458a91a206=true;null;"},{"name":"__silent_Branch_RootDecisionBranch_1228ce36991b6c1090800f31da97ae06","applicable":"vaVars.previous_graph_node==\"RootDecision_for_goal_primary___RootDecision_de28ce36d41b6c10fe081af13bee1305\" &amp;&amp; ((vaInputs.RootDecisionBranch_5228ce36421b6c106c96cf458a91a206.getValue() == true))","direction":"Input","required":true,"prompt_msg":"vaVars.previous_graph_node=\"RootDecisionBranch_1228ce36991b6c1090800f31da97ae06___RootDecisionBranch_1228ce36991b6c1090800f31da97ae06\";vaInputs.__silent_Branch_RootDecisionBranch_1228ce36991b6c1090800f31da97ae06=true;null;","confirm_msg_on_default_value":{"msg":"","val_for_confirm":true},"nlu_text_input":false,"nlu_confirmation_prompt":false,"acknowledge_msg":"vaVars.previous_graph_node=\"RootDecisionBranch_1228ce36991b6c1090800f31da97ae06___RootDecisionBranch_1228ce36991b6c1090800f31da97ae06\";null;"},{"name":"__silent_StartGoal_9fee03dec4044cd5acda5ba15f5d5b7d","applicable":"vaVars.previous_graph_node==\"RootDecisionBranch_1228ce36991b6c1090800f31da97ae06___RootDecisionBranch_1228ce36991b6c1090800f31da97ae06\"","direction":"Input","required":true,"prompt_msg":"vaVars.previous_graph_node=\"Start___9fee03dec4044cd5acda5ba15f5d5b7d\";vaInputs.__silent_StartGoal_9fee03dec4044cd5acda5ba15f5d5b7d=true;null;","confirm_msg_on_default_value":{"msg":"","val_for_confirm":true},"nlu_text_input":false,"nlu_confirmation_prompt":false,"acknowledge_msg":"vaVars.previous_graph_node=\"Start___9fee03dec4044cd5acda5ba15f5d5b7d\";null;"},{"name":"__silent_OutputPrompt_ee065874781c4882bc42174cb3fd66db","applicable":"vaVars.previous_graph_node==\"Start___9fee03dec4044cd5acda5ba15f5d5b7d\"","direction":"Input","required":true,"prompt_msg":"vaVars.previous_graph_node=\"Hello User___ee065874781c4882bc42174cb3fd66db\";vaInputs.__silent_OutputPrompt_ee065874781c4882bc42174cb3fd66db=true;null;","confirm_msg_on_default_value":{"msg":"","val_for_confirm":true},"nlu_text_input":false,"nlu_confirmation_prompt":false,"acknowledge_msg":"vaVars.previous_graph_node=\"Hello User___ee065874781c4882bc42174cb3fd66db\";(function execute() {return gs.getMessageLang(\"Hello {0}\\nHere is your local weather!\", vaContext.getRequesterLang(), [vaInputs.user.first_name]);})();","acknowledge_msg_mask_type":"NONE"},{"name":"__silent_ScriptedAction_8017d26c385e45a89c860a635460663c","applicable":"vaVars.previous_graph_node==\"Hello User___ee065874781c4882bc42174cb3fd66db\"","direction":"Input","required":true,"prompt_msg":"vaVars.previous_graph_node=\"Get Profile City___8017d26c385e45a89c860a635460663c\";(function execute() {\n//Created by Clark Bohs on 4/7/2021\n\n(function execute() {\n   \n    try { \n\n \n var UserName = gs.getUserName();\n\n var now_GR = new GlideRecord('sys_user');\n\n var ReturnValue = now_GR.get('user_name', UserName);\n\n vaVars.cityName = now_GR.getDisplayValue('location');\n\n vaVars.City_State = now_GR.getDisplayValue('location');\n\n\n \n}\n\ncatch(ex) {\n var message = ex.message;\n}\n\n\n})()\n\n;})();vaInputs.__silent_ScriptedAction_8017d26c385e45a89c860a635460663c=true;null;","confirm_msg_on_default_value":{"msg":"","val_for_confirm":true},"nlu_text_input":false,"nlu_confirmation_prompt":false,"acknowledge_msg":"vaVars.previous_graph_node=\"Get Profile City___8017d26c385e45a89c860a635460663c\";null;"},{"name":"__silent_HtmlOutputPrompt_42e0fe7aed6242008937b77379fda671","applicable":"vaVars.previous_graph_node==\"Get Weather info by City___1e5ccd726d7149fb99e2deb7c81d5bec\"","direction":"Input","required":true,"prompt_msg":"vaVars.previous_graph_node=\"Display Weather Info in HTML___42e0fe7aed6242008937b77379fda671\";vaInputs.__silent_HtmlOutputPrompt_42e0fe7aed6242008937b77379fda671=true;null;","confirm_msg_on_default_value":{"msg":"","val_for_confirm":true},"nlu_text_input":false,"nlu_confirmation_prompt":false,"acknowledge_msg":"vaVars.previous_graph_node=\"Display Weather Info in HTML___42e0fe7aed6242008937b77379fda671\";(function execute() {var html=\"&lt;html&gt; &lt;head&gt; &lt;/style&gt; &lt;/head&gt;     &lt;body&gt;      &lt;b&gt;&lt;p style=\\\"font-size:30px;margin:0em;\\\"&gt; \" + vaVars.City_State + \"&lt;/p&gt;&lt;/b&gt;  &lt;b&gt;&lt;p style=\\\"color:DodgerBlue;font-size:30px;margin:0em;\\\"&gt;\" + vaVars.currentTemp + \" \" + vaVars.description + \" &lt;/p&gt;&lt;/b&gt;  &lt;img src=\" + vaVars.icon + \"&gt;         &lt;/body&gt; &lt;/html&gt; \";var type='html';var height=0;var width=0;return (function execute() {var outMsg = new sn_cs.SinglePartOutMsg();outMsg.setHtmlPart(html, type, height, width);return outMsg;})();})();"},{"name":"__silent_Decision_9437a7eb2ace41cea8707ec29f3b37e0","applicable":"vaVars.previous_graph_node==\"Choose Loc from History___5de49af003a54009b7c074ab7cf2ae16\"","direction":"Input","required":true,"prompt_msg":"vaVars.previous_graph_node=\"Decision___9437a7eb2ace41cea8707ec29f3b37e0\";vaInputs.__silent_Decision_9437a7eb2ace41cea8707ec29f3b37e0=true;null;","confirm_msg_on_default_value":{"msg":"","val_for_confirm":true},"nlu_text_input":false,"nlu_confirmation_prompt":false,"acknowledge_msg":"vaVars.previous_graph_node=\"Decision___9437a7eb2ace41cea8707ec29f3b37e0\";null;"},{"name":"__silent_Branch_6868bbf1712443258146a27bce2b1307","applicable":"vaVars.previous_graph_node==\"Decision___9437a7eb2ace41cea8707ec29f3b37e0\" &amp;&amp; (function execute() {\n    /* Return true or false to indicate the branch condition's applicability.\n       For example:\n\n       var applies = vaInputs.first_name == 'Bill' ? true : false;\n       return applies;\n    */\n    if(vaInputs.choose_loc_from_history == 'chooseAnotherCity')\n    {return true;}\n    \n})()\n","direction":"Input","required":true,"prompt_msg":"vaVars.previous_graph_node=\"chooseAnotherCity___6868bbf1712443258146a27bce2b1307\";vaInputs.__silent_Branch_6868bbf1712443258146a27bce2b1307=true;null;","confirm_msg_on_default_value":{"msg":"","val_for_confirm":true},"nlu_text_input":false,"nlu_confirmation_prompt":false,"acknowledge_msg":"vaVars.previous_graph_node=\"chooseAnotherCity___6868bbf1712443258146a27bce2b1307\";null;"},{"name":"__silent_Branch_98a292fc46f64f93ac55e19f6e4fc478","applicable":"vaVars.previous_graph_node==\"Decision___9437a7eb2ace41cea8707ec29f3b37e0\" &amp;&amp; (function execute() {\n    /* Return true or false to indicate the branch condition's applicability.\n       For example:\n\n       var applies = vaInputs.first_name == 'Bill' ? true : false;\n       return applies;\n    */\n    if(vaInputs.choose_loc_from_history == 'exit')\n    {return true;}\n    \n})()\n","direction":"Input","required":true,"prompt_msg":"vaVars.previous_graph_node=\"Exit___98a292fc46f64f93ac55e19f6e4fc478\";vaInputs.__silent_Branch_98a292fc46f64f93ac55e19f6e4fc478=true;null;","confirm_msg_on_default_value":{"msg":"","val_for_confirm":true},"nlu_text_input":false,"nlu_confirmation_prompt":false,"acknowledge_msg":"vaVars.previous_graph_node=\"Exit___98a292fc46f64f93ac55e19f6e4fc478\";null;"},{"name":"__silent_Branch_f3de844bd0714f7ea5ac0dfb6e58d0ec","applicable":"vaVars.previous_graph_node==\"Decision___9437a7eb2ace41cea8707ec29f3b37e0\" &amp;&amp; true","direction":"Input","required":true,"prompt_msg":"vaVars.previous_graph_node=\"Always___f3de844bd0714f7ea5ac0dfb6e58d0ec\";vaInputs.__silent_Branch_f3de844bd0714f7ea5ac0dfb6e58d0ec=true;null;","confirm_msg_on_default_value":{"msg":"","val_for_confirm":true},"nlu_text_input":false,"nlu_confirmation_prompt":false,"acknowledge_msg":"vaVars.previous_graph_node=\"Always___f3de844bd0714f7ea5ac0dfb6e58d0ec\";null;"},{"name":"city4characters","applicable":"vaVars.previous_graph_node==\"chooseAnotherCity___6868bbf1712443258146a27bce2b1307\"","direction":"Input","required":true,"prompt_msg":"vaVars.previous_graph_node=\"city4characters___f783e8c282944644b230c887a9114104\";gs.getMessageLang(\"Enter at least first 3 characters of city:\", vaContext.getRequesterLang())","input_prompt_format_type":"Text","input_prompt_validaton_script":"","confirm_msg_on_default_value":{"msg":"","val_for_confirm":true},"nlu_text_input":false,"nlu_confirmation_prompt":true,"acknowledge_msg":"vaVars.previous_graph_node=\"city4characters___f783e8c282944644b230c887a9114104\";null;"},{"name":"__silent_ScriptedAction_eb0d305196784ee9887b5a3bdf8f2dd8","applicable":"vaVars.previous_graph_node==\"Always___f3de844bd0714f7ea5ac0dfb6e58d0ec\"","direction":"Input","required":true,"prompt_msg":"vaVars.previous_graph_node=\"Add to CityName variable___eb0d305196784ee9887b5a3bdf8f2dd8\";(function execute() {(function execute() {\n\n    var Result = vaInputs.choose_loc_from_history;\n\n    var Result = Result.toString();\n\n    vaVars.City_State = Result.replace(',US',\"\");\n\n    vaVars.cityName = vaInputs.choose_loc_from_history;\n\n    var tableRec = new GlideRecord('x_544290_weather_weather_virtualagent');\n\n        var userName = gs.getUserName()  \n        \n        tableRec.addQuery('location_choice',vaVars.cityName);\n        tableRec.addQuery('sys_updated_by',userName);\n        tableRec.query();\n\n        if(tableRec.next()) \n        {          \n            tableRec.deleteRecord();     \n        }\n          \n            tableRec.initialize();\n\n            tableRec.location_choice = vaVars.cityName;\n\n            tableRec.insert();     \n            \n})()\n;})();vaInputs.__silent_ScriptedAction_eb0d305196784ee9887b5a3bdf8f2dd8=true;null;","confirm_msg_on_default_value":{"msg":"","val_for_confirm":true},"nlu_text_input":false,"nlu_confirmation_prompt":false,"acknowledge_msg":"vaVars.previous_graph_node=\"Add to CityName variable___eb0d305196784ee9887b5a3bdf8f2dd8\";vaInputs.__silent_ScriptedAction_1e5ccd726d7149fb99e2deb7c81d5bec.reset();null;"},{"name":"__silent_ScriptedAction_0e4ee5aaf36147b3b628557d72a775b4","applicable":"vaVars.previous_graph_node==\"city4characters___f783e8c282944644b230c887a9114104\"","direction":"Input","required":true,"prompt_msg":"vaVars.previous_graph_node=\"Get City List___0e4ee5aaf36147b3b628557d72a775b4\";(function execute() {(function execute() {\n   try { \n  var r = new sn_ws.RESTMessageV2('x_544290_weather.GeoBytesCity', 'Default GET');\n  r.setStringParameterNoEscape('city',vaInputs.city4characters);\n\n var response = r.execute();\n var responseBody = response.getBody();\n var httpStatus = response.getStatusCode();\n\nvaVars.EmptyString = responseBody;\n\nvaVars.DoesCityExist = \"Yes\"; \n\nif(responseBody == '[\\\"\\\"]')\n  {      \nvaVars.DoesCityExist = \"No\"; \nvaVars.error = \"\\\"\" + vaInputs.city4characters + \"\\\" not found\";\n  }\n\n  if(responseBody == '[\\\"%s\\\"]')\n  {\n    vaVars.DoesCityExist = \"No\"; \n\n    vaVars.error = \"\\\"\" + vaInputs.city4characters + \"\\\" less than 3 characters\";\n  }\n\n   \n}\n\ncatch(ex) {\n var message = ex.message;\n}\n\n  \n}\n\n)()\n;})();vaInputs.__silent_ScriptedAction_0e4ee5aaf36147b3b628557d72a775b4=true;null;","confirm_msg_on_default_value":{"msg":"","val_for_confirm":true},"nlu_text_input":false,"nlu_confirmation_prompt":false,"acknowledge_msg":"vaVars.previous_graph_node=\"Get City List___0e4ee5aaf36147b3b628557d72a775b4\";null;"},{"name":"__silent_TerminateGoal_637ba7d5571b47ddb9ce89adc504b8c7","applicable":"vaVars.previous_graph_node==\"Goodbye Text___2d2f1c05b8e24953af9c45b3d2ed6430\"","direction":"Input","required":true,"prompt_msg":"vaVars.previous_graph_node=\"End___637ba7d5571b47ddb9ce89adc504b8c7\";vaInputs.__silent_TerminateGoal_637ba7d5571b47ddb9ce89adc504b8c7=true;null;","confirm_msg_on_default_value":{"msg":"","val_for_confirm":true},"nlu_text_input":false,"nlu_confirmation_prompt":false,"acknowledge_msg":"vaVars.previous_graph_node=\"End___637ba7d5571b47ddb9ce89adc504b8c7\";vaVars.__segment_trigger_e4fac172df4343808b7d3f3ed6bde7a7_done=true;null;"},{"name":"__silent_Decision_6cbdd0cf42d540bbacee9377707552a5","applicable":"vaVars.previous_graph_node==\"Get City List___0e4ee5aaf36147b3b628557d72a775b4\"","direction":"Input","required":true,"prompt_msg":"vaVars.previous_graph_node=\"Decision___6cbdd0cf42d540bbacee9377707552a5\";vaInputs.__silent_Decision_6cbdd0cf42d540bbacee9377707552a5=true;null;","confirm_msg_on_default_value":{"msg":"","val_for_confirm":true},"nlu_text_input":false,"nlu_confirmation_prompt":false,"acknowledge_msg":"vaVars.previous_graph_node=\"Decision___6cbdd0cf42d540bbacee9377707552a5\";null;"},{"name":"__silent_Branch_bc609e4a03cb4318b3937fdbbb3b1e09","applicable":"vaVars.previous_graph_node==\"Decision___6cbdd0cf42d540bbacee9377707552a5\" &amp;&amp; (function execute() {\n    /* Return true or false to indicate the branch condition's applicability.\n       For example:\n\n       var applies = vaInputs.first_name == 'Bill' ? true : false;\n       return applies;\n    */\n \n    if(vaVars.DoesCityExist == \"Yes\")\n    {return true;}\n   \n})()\n","direction":"Input","required":true,"prompt_msg":"vaVars.previous_graph_node=\"Yes___bc609e4a03cb4318b3937fdbbb3b1e09\";vaInputs.__silent_Branch_bc609e4a03cb4318b3937fdbbb3b1e09=true;null;","confirm_msg_on_default_value":{"msg":"","val_for_confirm":true},"nlu_text_input":false,"nlu_confirmation_prompt":false,"acknowledge_msg":"vaVars.previous_graph_node=\"Yes___bc609e4a03cb4318b3937fdbbb3b1e09\";null;"},{"name":"__silent_Branch_c6dd904435284e2d87389f4a23aa33b8","applicable":"vaVars.previous_graph_node==\"Decision___6cbdd0cf42d540bbacee9377707552a5\" &amp;&amp; (function execute() {\n    /* Return true or false to indicate the branch condition's applicability.\n       For example:\n\n       var applies = vaInputs.first_name == 'Bill' ? true : false;\n       return applies;\n    */\n\n    if(vaVars.DoesCityExist == \"No\")\n    {return true;}\n   \n})()\n","direction":"Input","required":true,"prompt_msg":"vaVars.previous_graph_node=\"No___c6dd904435284e2d87389f4a23aa33b8\";vaInputs.__silent_Branch_c6dd904435284e2d87389f4a23aa33b8=true;null;","confirm_msg_on_default_value":{"msg":"","val_for_confirm":true},"nlu_text_input":false,"nlu_confirmation_prompt":false,"acknowledge_msg":"vaVars.previous_graph_node=\"No___c6dd904435284e2d87389f4a23aa33b8\";null;"},{"name":"choose_loc_from_history","applicable":"(vaVars.previous_graph_node==\"Not found___f56ae04393bf4bbb8c887911b1ee0227\" || vaVars.previous_graph_node==\"Display Weather Info in HTML___42e0fe7aed6242008937b77379fda671\")","direction":"Input","required":true,"prompt_msg":"vaVars.previous_graph_node=\"Choose Loc from History___5de49af003a54009b7c074ab7cf2ae16\";(function execute() {vaInputs.__silent_Branch_a0dbe84971ca4e2e8d11d4f83fe50094.reset();vaInputs.choice_of_city.reset();vaInputs.__silent_ScriptedAction_d566b824d67c4954aba683bbd8e697ac.reset();vaInputs.__silent_ScriptedAction_c5e32099ad06445bae8d01f5c7592d71.reset();vaInputs.__silent_Branch_f3de844bd0714f7ea5ac0dfb6e58d0ec.reset();vaInputs.__silent_Branch_6868bbf1712443258146a27bce2b1307.reset();vaInputs.__silent_TerminateGoal_637ba7d5571b47ddb9ce89adc504b8c7.reset();vaInputs.__silent_Decision_d1eeb6d361294635a20a39ca6bc698a2.reset();vaInputs.__silent_ScriptedAction_eb0d305196784ee9887b5a3bdf8f2dd8.reset();vaInputs.__silent_ScriptedAction_0e4ee5aaf36147b3b628557d72a775b4.reset();vaInputs.__silent_OutputPrompt_f56ae04393bf4bbb8c887911b1ee0227.reset();vaInputs.__silent_OutputPrompt_2d2f1c05b8e24953af9c45b3d2ed6430.reset();vaInputs.__silent_Branch_bc609e4a03cb4318b3937fdbbb3b1e09.reset();vaInputs.__silent_Branch_2ba53dc293f74d288eeaa55bf9d70987.reset();vaInputs.__silent_Branch_c6dd904435284e2d87389f4a23aa33b8.reset();vaInputs.__silent_Decision_9437a7eb2ace41cea8707ec29f3b37e0.reset();vaInputs.city4characters.reset();vaInputs.__silent_Decision_6cbdd0cf42d540bbacee9377707552a5.reset();vaInputs.__silent_Branch_98a292fc46f64f93ac55e19f6e4fc478.reset();})();var vaRuntimeUtil = new global.VaTopicRuntimeUtil();var funcObj = {\"customApplies\": function() {return true;},\"applies\": function() {return this.customApplies() &amp;&amp; this.buildOptions('x_544290_weather_weather_virtualagent').length &gt; 0;},\"buildOptions\": function(table) {if (!this.customApplies()) { return []; }return (function execute(table) {return (function execute(table) {\n\n      var options = [];\n      var gr = new GlideRecordSecure('x_544290_weather_weather_virtualagent');        \n\n      var userName = gs.getUserName() \n\n      vaVars.error = userName;\n\n       gr.addQuery('sys_updated_by',userName);\n       gr.orderByDesc('sys_updated_on');\n       gr.setLimit(4);\n       gr.query();\n        while(gr.next()) {\n          \n            options.push({ 'value': gr.getValue('location_choice'), 'label': gr.getValue('location_choice') });\n              \n        }\n        options.push({ 'value': \"chooseAnotherCity\", 'label': \"Choose Another City\" });\n         options.push({ 'value': \"exit\", 'label': \"Exit\" });\n         \n       \n        return options; \n\n   \n})(table)\n})('x_544290_weather_weather_virtualagent');}};(function execute() {var promptMsg=null;if (vaRuntimeUtil.executeFunction(funcObj, 'applies')) {promptMsg = gs.getMessageLang(\"Select One:\", vaContext.getRequesterLang());}else {vaInputs.choose_loc_from_history=\"\";}vaRuntimeUtil.executeFunction(funcObj, 'buildOptions');return promptMsg;})();","confirm_msg_on_default_value":{"msg":"","val_for_confirm":true},"nlu_text_input":false,"nlu_confirmation_prompt":true,"acknowledge_msg":"vaVars.previous_graph_node=\"Choose Loc from History___5de49af003a54009b7c074ab7cf2ae16\";(function execute() {var vaRuntimeUtil=new global.VaTopicRuntimeUtil();var funcObj={\"customApplies\": function() {return true;},\"applies\": function() {return this.customApplies() &amp;&amp; this.buildOptions('x_544290_weather_weather_virtualagent').length &gt; 0;},\"buildOptions\": function(table) {if (!this.customApplies()) { return []; }return (function execute(table) {return (function execute(table) {\n\n      var options = [];\n      var gr = new GlideRecordSecure('x_544290_weather_weather_virtualagent');        \n\n      var userName = gs.getUserName() \n\n      vaVars.error = userName;\n\n       gr.addQuery('sys_updated_by',userName);\n       gr.orderByDesc('sys_updated_on');\n       gr.setLimit(4);\n       gr.query();\n        while(gr.next()) {\n          \n            options.push({ 'value': gr.getValue('location_choice'), 'label': gr.getValue('location_choice') });\n              \n        }\n        options.push({ 'value': \"chooseAnotherCity\", 'label': \"Choose Another City\" });\n         options.push({ 'value': \"exit\", 'label': \"Exit\" });\n         \n       \n        return options; \n\n   \n})(table)\n})('x_544290_weather_weather_virtualagent');}};var acknowledgeMsg=gs.getMessageLang(\"Location History Not Found\", vaContext.getRequesterLang());if (vaRuntimeUtil.executeFunction(funcObj, 'applies')) {acknowledgeMsg=(function execute() {return null;})();}return acknowledgeMsg;})();"},{"name":"choice_of_city","applicable":"vaVars.previous_graph_node==\"Yes___bc609e4a03cb4318b3937fdbbb3b1e09\"","direction":"Input","required":true,"prompt_msg":"vaVars.previous_graph_node=\"choice of city___13794769cb9a425cba5b8345abefd431\";var vaRuntimeUtil = new global.VaTopicRuntimeUtil();var funcObj = {\"customApplies\": function() {return (function() {return true})();},\"applies\": function() {return this.customApplies() &amp;&amp; this.buildOptions().length &gt; 0;},\"buildOptions\": function() {if (false || this.customApplies()) {return (function execute() {\n   try { \n  var r = new sn_ws.RESTMessageV2('x_544290_weather.GeoBytesCity', 'Default GET');\n r.setStringParameterNoEscape('city',vaInputs.city4characters);\n\n var response = r.execute();\n var responseBody = response.getBody();\n var httpStatus = response.getStatusCode();\n\n var str = responseBody;\nvar res = str.replace(\"[\\\"\", \"\");\n\nvar res2 = res.replace(\"\\\"]\", \"\");\n\nvar nameArr = res2.split('\",\"');\n\nvar options = [];\n\nfor (i = 0; i &lt; nameArr.length; ++i) {\n\n  var CityItem = nameArr[i];\n\n  var CityItem3 = CityItem.replace(\"\\, \",\"\\,\");\n\n  vaVars.CityLIstResults = CityItem3;\n\n  options.push({ 'value': CityItem3, 'label': gs.getMessage(CityItem3), 'render_style': 'data' });\n \n}\n \n  options.push({ 'value': \"exit\", 'label': \"Exit\", 'render_style': 'data' });\n   \n}\n\ncatch(ex) {\n var message = ex.message;\n}\n\n   return options;\n\n}\n\n)()\n;}return [];}};(function execute() {var promptMsg=null;if (vaRuntimeUtil.executeFunction(funcObj, 'applies')) {promptMsg = gs.getMessageLang(\"Select City\", vaContext.getRequesterLang());}else {vaInputs.choice_of_city=\"\";}vaRuntimeUtil.executeFunction(funcObj, 'buildOptions');return promptMsg;})();","confirm_msg_on_default_value":{"msg":"","val_for_confirm":true},"nlu_text_input":false,"nlu_confirmation_prompt":true,"acknowledge_msg":"vaVars.previous_graph_node=\"choice of city___13794769cb9a425cba5b8345abefd431\";(function execute() {var vaRuntimeUtil=new global.VaTopicRuntimeUtil();var funcObj={\"customApplies\": function() {return (function() {return true})();},\"applies\": function() {return this.customApplies() &amp;&amp; this.buildOptions().length &gt; 0;},\"buildOptions\": function() {if (false || this.customApplies()) {return (function execute() {\n   try { \n  var r = new sn_ws.RESTMessageV2('x_544290_weather.GeoBytesCity', 'Default GET');\n r.setStringParameterNoEscape('city',vaInputs.city4characters);\n\n var response = r.execute();\n var responseBody = response.getBody();\n var httpStatus = response.getStatusCode();\n\n var str = responseBody;\nvar res = str.replace(\"[\\\"\", \"\");\n\nvar res2 = res.replace(\"\\\"]\", \"\");\n\nvar nameArr = res2.split('\",\"');\n\nvar options = [];\n\nfor (i = 0; i &lt; nameArr.length; ++i) {\n\n  var CityItem = nameArr[i];\n\n  var CityItem3 = CityItem.replace(\"\\, \",\"\\,\");\n\n  vaVars.CityLIstResults = CityItem3;\n\n  options.push({ 'value': CityItem3, 'label': gs.getMessage(CityItem3), 'render_style': 'data' });\n \n}\n \n  options.push({ 'value': \"exit\", 'label': \"Exit\", 'render_style': 'data' });\n   \n}\n\ncatch(ex) {\n var message = ex.message;\n}\n\n   return options;\n\n}\n\n)()\n;}return [];}};var acknowledgeMsg=gs.getMessageLang(\"Cities not found\", vaContext.getRequesterLang());if (vaRuntimeUtil.executeFunction(funcObj, 'applies')) {acknowledgeMsg=(function execute() {return null;})();}return acknowledgeMsg;})();"},{"name":"__silent_OutputPrompt_f56ae04393bf4bbb8c887911b1ee0227","applicable":"vaVars.previous_graph_node==\"No___c6dd904435284e2d87389f4a23aa33b8\"","direction":"Input","required":true,"prompt_msg":"vaVars.previous_graph_node=\"Not found___f56ae04393bf4bbb8c887911b1ee0227\";vaInputs.__silent_OutputPrompt_f56ae04393bf4bbb8c887911b1ee0227=true;null;","confirm_msg_on_default_value":{"msg":"","val_for_confirm":true},"nlu_text_input":false,"nlu_confirmation_prompt":false,"acknowledge_msg":"vaVars.previous_graph_node=\"Not found___f56ae04393bf4bbb8c887911b1ee0227\";vaInputs.choose_loc_from_history.reset();(function execute() {\n    /* Return a quoted string.  For example:\n\n       if (vaInputs.first_name == 'Bill') {\n           return gs.getMessage('hi there {0}', [vaInputs.first_name]);\n       } else {\n           return gs.getMessage('how are you {0}', [vaInputs.last_name]);\n       }\n    */\n\n    \n\n    return gs.getMessage('Error: {0}', [vaVars.error]);\n})()\n","acknowledge_msg_mask_type":"NONE"},{"name":"__silent_Decision_d1eeb6d361294635a20a39ca6bc698a2","applicable":"vaVars.previous_graph_node==\"choice of city___13794769cb9a425cba5b8345abefd431\"","direction":"Input","required":true,"prompt_msg":"vaVars.previous_graph_node=\"Was Exit Selected?___d1eeb6d361294635a20a39ca6bc698a2\";vaInputs.__silent_Decision_d1eeb6d361294635a20a39ca6bc698a2=true;null;","confirm_msg_on_default_value":{"msg":"","val_for_confirm":true},"nlu_text_input":false,"nlu_confirmation_prompt":false,"acknowledge_msg":"vaVars.previous_graph_node=\"Was Exit Selected?___d1eeb6d361294635a20a39ca6bc698a2\";null;"},{"name":"__silent_Branch_a0dbe84971ca4e2e8d11d4f83fe50094","applicable":"vaVars.previous_graph_node==\"Was Exit Selected?___d1eeb6d361294635a20a39ca6bc698a2\" &amp;&amp; (function execute() {\n    /* Return true or false to indicate the branch condition's applicability.\n       For example:\n\n       var applies = vaInputs.first_name == 'Bill' ? true : false;\n       return applies;\n    */\n    if(vaInputs.choice_of_city != \"exit\")\n    {\n    return true;\n    }\n})()\n","direction":"Input","required":true,"prompt_msg":"vaVars.previous_graph_node=\"No___a0dbe84971ca4e2e8d11d4f83fe50094\";vaInputs.__silent_Branch_a0dbe84971ca4e2e8d11d4f83fe50094=true;null;","confirm_msg_on_default_value":{"msg":"","val_for_confirm":true},"nlu_text_input":false,"nlu_confirmation_prompt":false,"acknowledge_msg":"vaVars.previous_graph_node=\"No___a0dbe84971ca4e2e8d11d4f83fe50094\";null;"},{"name":"__silent_Branch_2ba53dc293f74d288eeaa55bf9d70987","applicable":"vaVars.previous_graph_node==\"Was Exit Selected?___d1eeb6d361294635a20a39ca6bc698a2\" &amp;&amp; (function execute() {\n    /* Return true or false to indicate the branch condition's applicability.\n       For example:\n\n       var applies = vaInputs.first_name == 'Bill' ? true : false;\n       return applies;\n    */\n    if(vaInputs.choice_of_city == \"exit\")\n    {\n    return true;\n    }\n})()\n","direction":"Input","required":true,"prompt_msg":"vaVars.previous_graph_node=\"Yes___2ba53dc293f74d288eeaa55bf9d70987\";vaInputs.__silent_Branch_2ba53dc293f74d288eeaa55bf9d70987=true;null;","confirm_msg_on_default_value":{"msg":"","val_for_confirm":true},"nlu_text_input":false,"nlu_confirmation_prompt":false,"acknowledge_msg":"vaVars.previous_graph_node=\"Yes___2ba53dc293f74d288eeaa55bf9d70987\";vaInputs.__silent_OutputPrompt_2d2f1c05b8e24953af9c45b3d2ed6430.reset();null;"},{"name":"__silent_OutputPrompt_2d2f1c05b8e24953af9c45b3d2ed6430","applicable":"(vaVars.previous_graph_node==\"Yes___2ba53dc293f74d288eeaa55bf9d70987\" || vaVars.previous_graph_node==\"Exit___98a292fc46f64f93ac55e19f6e4fc478\")","direction":"Input","required":true,"prompt_msg":"vaVars.previous_graph_node=\"Goodbye Text___2d2f1c05b8e24953af9c45b3d2ed6430\";(function execute() {vaInputs.__silent_TerminateGoal_637ba7d5571b47ddb9ce89adc504b8c7.reset();vaInputs.__silent_Branch_a0dbe84971ca4e2e8d11d4f83fe50094.reset();vaInputs.choice_of_city.reset();vaInputs.__silent_ScriptedAction_d566b824d67c4954aba683bbd8e697ac.reset();vaInputs.__silent_ScriptedAction_c5e32099ad06445bae8d01f5c7592d71.reset();vaInputs.__silent_ScriptedAction_0e4ee5aaf36147b3b628557d72a775b4.reset();vaInputs.__silent_OutputPrompt_f56ae04393bf4bbb8c887911b1ee0227.reset();vaInputs.__silent_Decision_d1eeb6d361294635a20a39ca6bc698a2.reset();vaInputs.__silent_Branch_2ba53dc293f74d288eeaa55bf9d70987.reset();vaInputs.__silent_Branch_c6dd904435284e2d87389f4a23aa33b8.reset();vaInputs.__silent_Branch_bc609e4a03cb4318b3937fdbbb3b1e09.reset();vaInputs.__silent_Decision_6cbdd0cf42d540bbacee9377707552a5.reset();})();vaInputs.__silent_OutputPrompt_2d2f1c05b8e24953af9c45b3d2ed6430=true;null;","confirm_msg_on_default_value":{"msg":"","val_for_confirm":true},"nlu_text_input":false,"nlu_confirmation_prompt":false,"acknowledge_msg":"vaVars.previous_graph_node=\"Goodbye Text___2d2f1c05b8e24953af9c45b3d2ed6430\";(function execute() {return gs.getMessageLang(\"***Please return soon*** ***{0}***\", vaContext.getRequesterLang(), [vaInputs.user.first_name]);})();","acknowledge_msg_mask_type":"NONE"},{"name":"__silent_ScriptedAction_d566b824d67c4954aba683bbd8e697ac","applicable":"vaVars.previous_graph_node==\"No___a0dbe84971ca4e2e8d11d4f83fe50094\"","direction":"Input","required":true,"prompt_msg":"vaVars.previous_graph_node=\"Add to City Variable___d566b824d67c4954aba683bbd8e697ac\";(function execute() {(function execute() {\n    /* Code your scripted action here. For example, you might update a\n       record based on conditional logic:\n\n        if (vaVars.my_flag == 'say hello') {\n            gs.info('hi there');\n        } else {\n            gs.info('bye now');\n        }\n    */\n\n    vaVars.City_State = vaInputs.choice_of_city;\n\nvaVars.cityName = vaInputs.choice_of_city + \",US\";\n\n})()\n;})();vaInputs.__silent_ScriptedAction_d566b824d67c4954aba683bbd8e697ac=true;null;","confirm_msg_on_default_value":{"msg":"","val_for_confirm":true},"nlu_text_input":false,"nlu_confirmation_prompt":false,"acknowledge_msg":"vaVars.previous_graph_node=\"Add to City Variable___d566b824d67c4954aba683bbd8e697ac\";null;"},{"name":"__silent_ScriptedAction_1e5ccd726d7149fb99e2deb7c81d5bec","applicable":"(vaVars.previous_graph_node==\"Add Loc to Table if Unique___c5e32099ad06445bae8d01f5c7592d71\" || vaVars.previous_graph_node==\"Add to CityName variable___eb0d305196784ee9887b5a3bdf8f2dd8\" || vaVars.previous_graph_node==\"Get Profile City___8017d26c385e45a89c860a635460663c\")","direction":"Input","required":true,"prompt_msg":"vaVars.previous_graph_node=\"Get Weather info by City___1e5ccd726d7149fb99e2deb7c81d5bec\";(function execute() {vaInputs.__silent_Branch_a0dbe84971ca4e2e8d11d4f83fe50094.reset();vaInputs.choose_loc_from_history.reset();vaInputs.choice_of_city.reset();vaInputs.__silent_ScriptedAction_d566b824d67c4954aba683bbd8e697ac.reset();vaInputs.__silent_ScriptedAction_c5e32099ad06445bae8d01f5c7592d71.reset();vaInputs.__silent_HtmlOutputPrompt_42e0fe7aed6242008937b77379fda671.reset();(function execute() {\n   \n    try { \n          var r = new sn_ws.RESTMessageV2('x_544290_weather.OpenWeather', 'Default GET');\n          r.setStringParameterNoEscape('city', vaVars.cityName);\n          \n var response = r.execute();\n var responseBody = response.getBody();\n var httpStatus = response.getStatusCode();\n\n var instanceName = gs.getProperty('instance_name');\n\n var Weather = JSON.parse(responseBody); \n\nvaVars.icon = \"IconMissing\";\n\n//Clear\nvar IconCheck = Weather.weather[0].icon.includes(\"01d\");\n if(IconCheck)\n {\n  vaVars.icon = \"https://\" + instanceName + \".service-now.com/Weather_Clear_Day.png\";\n }\n\n var IconCheck = Weather.weather[0].icon.includes(\"01n\");\n if(IconCheck)\n {\n  vaVars.icon = \"https://\" + instanceName + \".service-now.com/Weather_Clear_Night.png\";\n }\n  \n//Scattered clouds\nvar IconCheck = Weather.weather[0].icon.includes(\"03d\");\n if(IconCheck)\n {\n     vaVars.icon = \"https://\" + instanceName + \".service-now.com/Weather_Scattered_Clouds_Day.png\";\n }\n var IconCheck = Weather.weather[0].icon.includes(\"03n\");\n if(IconCheck)\n {\n     vaVars.icon = \"https://\" + instanceName + \".service-now.com/Weather_Scattered_Clouds_Night.png\";\n }\n\n//Few clouds\nvar IconCheck = Weather.weather[0].icon.includes(\"02d\");\n if(IconCheck)\n {\n     vaVars.icon = \"https://\" + instanceName + \".service-now.com/Weather_Scattered_Clouds_Day.png\";\n }\n \n var IconCheck = Weather.weather[0].icon.includes(\"02n\");\n if(IconCheck)\n {\n     vaVars.icon = \"https://\" + instanceName + \".service-now.com/Weather_Few_Clouds_Night.png\";\n }\n\n//Rain\nvar IconCheck = Weather.weather[0].icon.includes(\"10d\");\n if(IconCheck)\n {\n     vaVars.icon = \"https://\" + instanceName + \".service-now.com/Weather_Rain_Day.png\";\n }\n var IconCheck = Weather.weather[0].icon.includes(\"10n\");\n if(IconCheck)\n {\n     vaVars.icon = \"https://\" + instanceName + \".service-now.com/Weather_Rain_Night.png\";\n }\n\n//Shower rain\nvar IconCheck = Weather.weather[0].icon.includes(\"09d\");\nif(IconCheck)\n {\n     vaVars.icon = \"https://\" + instanceName + \".service-now.com/Weather_Rain_Day.png\";\n }\n var IconCheck = Weather.weather[0].icon.includes(\"09n\");\n if(IconCheck)\n {\n     vaVars.icon = \"https://\" + instanceName + \".service-now.com/Weather_Rain_Night.png\";\n }\n\n\n //Broken clouds\n var IconCheck = Weather.weather[0].icon.includes(\"04d\");\n if(IconCheck)\n {\n     vaVars.icon = \"https://\" + instanceName + \".service-now.com/Weather_Scattered_Clouds_Day.png\";\n }\n\n var IconCheck = Weather.weather[0].icon.includes(\"04n\");\n if(IconCheck)\n {\n     vaVars.icon = \"https://\" + instanceName + \".service-now.com/Weather_Few_Clouds_Night.png\";\n }\n\n //Thunderstorm\n var IconCheck = Weather.weather[0].icon.includes(\"11d\");\n if(IconCheck)\n {\n     vaVars.icon = \"https://\" + instanceName + \".service-now.com/Weather_Thunderstorm_Day.png\";\n }\n var IconCheck = Weather.weather[0].icon.includes(\"11n\");\n if(IconCheck)\n {\n     vaVars.icon = \"https://\" + instanceName + \".service-now.com/Weather_Thunderstorm_Night.png\";\n }\n\n //Snow\n var IconCheck = Weather.weather[0].icon.includes(\"13d\");\n if(IconCheck)\n {\n     vaVars.icon = \"https://\" + instanceName + \".service-now.com/Weather_Snow_Day.png\";\n }\n var IconCheck = Weather.weather[0].icon.includes(\"13n\");\n if(IconCheck)\n {\n     vaVars.icon = \"https://\" + instanceName + \".service-now.com/Weather_Snow_Night.png\";\n }\n\n//Mist\nvar IconCheck = Weather.weather[0].icon.includes(\"50d\");\n if(IconCheck)\n {\n     vaVars.icon = \"https://\" + instanceName + \".service-now.com/Weather_Mist_Day.png\";\n }\n var IconCheck = Weather.weather[0].icon.includes(\"50n\");\n if(IconCheck)\n {\n     vaVars.icon = \"https://\" + instanceName + \".service-now.com/Weather_Mist_Night.png\";\n }\n\n if(vaVars.icon == \"IconMissing\")\n {\n  vaVars.icon = \"https://\" + instanceName + \".service-now.com/Weather_weather.png\";\n }\n\n\n//this line is for the built-in images from openweather.  These images are too simple to be used\n//vaVars.icon = \"https://openweathermap.org/img/wn/\" + Weather.weather[0].icon + \"@2x.png\";\n\n \n vaVars.description = Weather.weather[0].main;\n vaVars.currentTemp = Math.round(Weather.main.temp) + \"Â°\";\n vaVars.cityNameHeading = Weather.name;\n\n\n}\n\n\ncatch(ex) {\n var message = ex.message;\n}\n\n\n})()\n\n;vaInputs.__silent_Branch_f3de844bd0714f7ea5ac0dfb6e58d0ec.reset();vaInputs.__silent_Branch_6868bbf1712443258146a27bce2b1307.reset();vaInputs.__silent_TerminateGoal_637ba7d5571b47ddb9ce89adc504b8c7.reset();vaInputs.__silent_Decision_d1eeb6d361294635a20a39ca6bc698a2.reset();vaInputs.__silent_ScriptedAction_eb0d305196784ee9887b5a3bdf8f2dd8.reset();vaInputs.__silent_ScriptedAction_0e4ee5aaf36147b3b628557d72a775b4.reset();vaInputs.__silent_OutputPrompt_f56ae04393bf4bbb8c887911b1ee0227.reset();vaInputs.__silent_OutputPrompt_2d2f1c05b8e24953af9c45b3d2ed6430.reset();vaInputs.__silent_Branch_bc609e4a03cb4318b3937fdbbb3b1e09.reset();vaInputs.__silent_Branch_2ba53dc293f74d288eeaa55bf9d70987.reset();vaInputs.__silent_Branch_c6dd904435284e2d87389f4a23aa33b8.reset();vaInputs.__silent_Decision_9437a7eb2ace41cea8707ec29f3b37e0.reset();vaInputs.city4characters.reset();vaInputs.__silent_Decision_6cbdd0cf42d540bbacee9377707552a5.reset();vaInputs.__silent_Branch_98a292fc46f64f93ac55e19f6e4fc478.reset();})();vaInputs.__silent_ScriptedAction_1e5ccd726d7149fb99e2deb7c81d5bec=true;null;","confirm_msg_on_default_value":{"msg":"","val_for_confirm":true},"nlu_text_input":false,"nlu_confirmation_prompt":false,"acknowledge_msg":"vaVars.previous_graph_node=\"Get Weather info by City___1e5ccd726d7149fb99e2deb7c81d5bec\";null;"},{"name":"__silent_ScriptedAction_c5e32099ad06445bae8d01f5c7592d71","applicable":"vaVars.previous_graph_node==\"Add to City Variable___d566b824d67c4954aba683bbd8e697ac\"","direction":"Input","required":true,"prompt_msg":"vaVars.previous_graph_node=\"Add Loc to Table if Unique___c5e32099ad06445bae8d01f5c7592d71\";(function execute() {(function execute() {\n    \n        var tableRec = new GlideRecord('x_544290_weather_weather_virtualagent');\n\n        var userName = gs.getUserName()  \n        \n        tableRec.addQuery('location_choice',vaVars.cityName);\n        tableRec.addQuery('sys_updated_by',userName);\n        tableRec.query();\n\n         \n        if(tableRec.next()) \n        {          \n            tableRec.deleteRecord();   \n        }\n\n            tableRec.initialize();\n\n            tableRec.location_choice = vaVars.cityName;\n\n            tableRec.insert();           \n   \n})()\n;})();vaInputs.__silent_ScriptedAction_c5e32099ad06445bae8d01f5c7592d71=true;null;","confirm_msg_on_default_value":{"msg":"","val_for_confirm":true},"nlu_text_input":false,"nlu_confirmation_prompt":false,"acknowledge_msg":"vaVars.previous_graph_node=\"Add Loc to Table if Unique___c5e32099ad06445bae8d01f5c7592d71\";vaInputs.__silent_ScriptedAction_1e5ccd726d7149fb99e2deb7c81d5bec.reset();null;"}],"variables_update":[]}],"roles":[],"active":true,"published":true,"library":false,"flexible_conversation_switching":false,"design_categories":[],"nlu_provider":"","nlu_model":"","nlu_intent":"","topic_type":"STANDARD","channels":[],"triggerable_by_notification":false,"auto_resolution_enabled":false,"score":0.0,"visible":true,"discoverable":true,"sys_scope":"541541c2db13e8101d775385ca961921","sys_domain":"global","title":"Weather","nlu_intent_label":"","nlu_model_label":""}</definition>
        <design_category/>
        <discoverable>true</discoverable>
        <fields/>
        <flexible_conversation_switching>false</flexible_conversation_switching>
        <is_system_topic>false</is_system_topic>
        <key_phrases>Weather</key_phrases>
        <last_published_on>2021-04-07 15:43:01</last_published_on>
        <library>false</library>
        <library_usage>null</library_usage>
        <metaphone>A0R</metaphone>
        <name>Weather</name>
        <nlu_intent/>
        <nlu_intent_label/>
        <nlu_model/>
        <nlu_model_label/>
        <nlu_provider/>
        <published>true</published>
        <roles/>
        <sys_class_name>sys_cs_topic</sys_class_name>
        <sys_created_by>admin</sys_created_by>
        <sys_created_on>2021-04-05 18:20:52</sys_created_on>
        <sys_domain>global</sys_domain>
        <sys_id>13199496db9be8101d775385ca96193b</sys_id>
        <sys_mod_count>7</sys_mod_count>
        <sys_name>Weather</sys_name>
        <sys_package display_value="Weather" source="x_544290_weather">541541c2db13e8101d775385ca961921</sys_package>
        <sys_policy/>
        <sys_scope display_value="Weather">541541c2db13e8101d775385ca961921</sys_scope>
        <sys_update_name>sys_cs_topic_13199496db9be8101d775385ca96193b</sys_update_name>
        <sys_updated_by>admin</sys_updated_by>
        <sys_updated_on>2021-04-07 15:43:01</sys_updated_on>
        <title>Weather</title>
        <triggerable_by_notification>false</triggerable_by_notification>
        <type>STANDARD</type>
        <vendor display_value="ServiceNow">c2f0b8f187033200246ddd4c97cb0bb9</vendor>
        <visible>true</visible>
    </sys_cs_topic>
    <sys_variable_value action="delete_multiple" query="document_key=13199496db9be8101d775385ca96193b"/>
</record_update>
